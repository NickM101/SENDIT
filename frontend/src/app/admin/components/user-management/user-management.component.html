<div class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto">
  <!-- Header Section -->
  <div class="flex flex-col space-y-4 md:flex-row md:justify-between md:items-center md:space-y-0 mb-6">
    <div class="space-y-1">
      <h1 class="text-3xl font-bold tracking-tight text-gray-800 dark:text-white">User Management</h1>
      <p class="text-sm text-gray-600 dark:text-gray-400">
        Manage all registered users and their permissions
      </p>
    </div>

    <nav class="flex" aria-label="Breadcrumb">
      <ol class="inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse">
        <li class="inline-flex items-center">
          <a routerLink="/"
            class="inline-flex items-center text-sm font-medium text-gray-800 dark:text-gray-400 dark:hover:text-white hover:text-blue-600">
            <svg class="flex-shrink-0 w-4 h-4 me-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
              viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round">
              <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
              <polyline points="9 22 9 12 15 12 15 22" />
            </svg>
            Home
          </a>
        </li>
        <li>
          <div class="flex items-center">
            <svg class="flex-shrink-0 w-4 h-4 text-gray-400 mx-2 rtl:rotate-180" xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="m9 18 6-6-6-6" />
            </svg>
            <a routerLink="/admin"
              class="text-sm font-medium text-gray-800 dark:text-gray-400 dark:hover:text-white hover:text-blue-600">Admin</a>
          </div>
        </li>
        <li aria-current="page">
          <div class="flex items-center">
            <svg class="flex-shrink-0 w-4 h-4 text-gray-400 mx-2 rtl:rotate-180" xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="m9 18 6-6-6-6" />
            </svg>
            <span class="text-sm font-medium text-gray-500 dark:text-gray-500">Users</span>
          </div>
        </li>
      </ol>
    </nav>
  </div>

  <!-- Stats Cards -->
  <ng-container *ngIf="!showUserForm">
    <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-6" *ngIf="userStats">
      <div
        class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-slate-900 dark:border-gray-800 dark:shadow-slate-700/[.7]">
        <div class="p-4 md:p-5">
          <div class="flex items-center gap-x-2">
            <p class="text-xs uppercase tracking-wide text-gray-500">
              Total Users
            </p>
            <div class="hs-tooltip">
              <div class="hs-tooltip-toggle">
                <svg class="flex-shrink-0 w-3 h-3 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24"
                  height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10" />
                  <path d="M12 16v-4" />
                  <path d="M12 8h.01" />
                </svg>
                <span
                  class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 inline-block absolute invisible z-20 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-lg shadow-sm dark:bg-slate-700"
                  role="tooltip">
                  Total users in the system
                </span>
              </div>
            </div>
          </div>

          <div class="mt-1 flex items-center gap-x-2">
            <h3 class="text-xl sm:text-2xl font-medium text-gray-800 dark:text-gray-200">
              {{ userStats.totalUsers }}
            </h3>
            <span class="flex items-center gap-x-1 text-green-600">
              <svg class="inline-block w-4 h-4 self-center" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="22 7 13 16 2 7" />
                <line x1="13" x2="13" y1="16" y2="7" />
                <line x1="2" x2="13" y1="7" y2="7" />
              </svg>
              <span class="inline-block text-sm">
                +20.1%
              </span>
            </span>
          </div>
        </div>
      </div>

      <div
        class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-slate-900 dark:border-gray-800 dark:shadow-slate-700/[.7]">
        <div class="p-4 md:p-5">
          <div class="flex items-center gap-x-2">
            <p class="text-xs uppercase tracking-wide text-gray-500">
              Active Users
            </p>
          </div>

          <div class="mt-1 flex items-center gap-x-2">
            <h3 class="text-xl sm:text-2xl font-medium text-gray-800 dark:text-gray-200">
              {{ userStats.activeUsers }}
            </h3>
            <span class="flex items-center gap-x-1 text-green-600">
              <svg class="inline-block w-4 h-4 self-center" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="22 7 13 16 2 7" />
                <line x1="13" x2="13" y1="16" y2="7" />
                <line x1="2" x2="13" y1="7" y2="7" />
              </svg>
              <span class="inline-block text-sm">
                +180.1%
              </span>
            </span>
          </div>
        </div>
      </div>

      <div
        class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-slate-900 dark:border-gray-800 dark:shadow-slate-700/[.7]">
        <div class="p-4 md:p-5">
          <div class="flex items-center gap-x-2">
            <p class="text-xs uppercase tracking-wide text-gray-500">
              Inactive Users
            </p>
          </div>

          <div class="mt-1 flex items-center gap-x-2">
            <h3 class="text-xl sm:text-2xl font-medium text-gray-800 dark:text-gray-200">
              {{ userStats.inactiveUsers }}
            </h3>
            <span class="flex items-center gap-x-1 text-red-600">
              <svg class="inline-block w-4 h-4 self-center" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="22 17 13 8 2 17" />
                <line x1="13" x2="13" y1="8" y2="17" />
                <line x1="22" x2="13" y1="17" y2="17" />
              </svg>
              <span class="inline-block text-sm">
                +19%
              </span>
            </span>
          </div>
        </div>
      </div>

      <div
        class="flex flex-col bg-white border shadow-sm rounded-xl dark:bg-slate-900 dark:border-gray-800 dark:shadow-slate-700/[.7]">
        <div class="p-4 md:p-5">
          <div class="flex items-center gap-x-2">
            <p class="text-xs uppercase tracking-wide text-gray-500">
              Admin Users
            </p>
          </div>

          <div class="mt-1 flex items-center gap-x-2">
            <h3 class="text-xl sm:text-2xl font-medium text-gray-800 dark:text-gray-200">
              {{ userStats.adminUsers }}
            </h3>
            <span class="flex items-center gap-x-1 text-green-600">
              <svg class="inline-block w-4 h-4 self-center" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="22 7 13 16 2 7" />
                <line x1="13" x2="13" y1="16" y2="7" />
                <line x1="2" x2="13" y1="7" y2="7" />
              </svg>
              <span class="inline-block text-sm">
                +201
              </span>
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Card -->
    <div class="flex flex-col">
      <div class="-m-1.5 overflow-x-auto">
        <div class="p-1.5 min-w-full inline-block align-middle">
          <div
            class="bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden dark:bg-slate-900 dark:border-gray-700">
            <!-- Header -->
            <div
              class="px-6 py-4 grid gap-3 md:flex md:justify-between md:items-center border-b border-gray-200 dark:border-gray-700">
              <div>
                <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200">
                  User Directory
                </h2>
                <p class="text-sm text-gray-600 dark:text-gray-400">
                  Manage your application users and permissions
                </p>
              </div>

              <div>
                <div class="inline-flex gap-x-2">
                  <button type="button" (click)="openCreateUserModal()"
                    class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none">
                    <svg class="flex-shrink-0 w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                      viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round">
                      <path d="M2.75 12.25L6.25 8.75L13.25 15.75" />
                      <path d="M13.25 2.25L6.25 9.25L2.75 5.75" />
                    </svg>
                    Add User
                  </button>
                </div>
              </div>
            </div>
            <!-- End Header -->

            <!-- Filters -->
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 p-6">
              <div class="relative">
                <input type="text" id="hs-search-filter-dropdown" [(ngModel)]="searchQuery" (input)="applyFilters()"
                  class="py-2 px-3 ps-11 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600"
                  placeholder="Search users...">
                <div class="absolute inset-y-0 start-0 flex items-center pointer-events-none ps-4">
                  <svg class="h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.3-4.3" />
                  </svg>
                </div>
              </div>

              <select [(ngModel)]="selectedRole" (change)="applyFilters()"
                class="py-2 px-3 pe-9 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600">
                <option value="">All Roles</option>
                <option value="USER">User</option>
                <option value="ADMIN">Admin</option>
                <option value="PREMIUM_USER">Premium User</option>
              </select>

              <select [(ngModel)]="selectedStatus" (change)="applyFilters()"
                class="py-2 px-3 pe-9 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400 dark:focus:ring-gray-600">
                <option value="">All Statuses</option>
                <option value="true">Active</option>
                <option value="false">Inactive</option>
              </select>

              <button type="button" (click)="clearFilters()"
                class="py-2 px-3 inline-flex justify-center items-center gap-x-2 text-sm font-semibold rounded-lg border border-gray-200 text-gray-800 hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:border-gray-700 dark:text-white dark:hover:bg-gray-800">
                <svg class="flex-shrink-0 w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                  viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round">
                  <path d="M2 14L14 2" />
                  <path d="M14 14L2 2" />
                </svg>
                Clear Filters
              </button>
            </div>
            <!-- End Filters -->

            <!-- Loading State -->
            <div *ngIf="loading" class="text-center p-6">
              <div class="animate-spin inline-block w-6 h-6 border-[3px] border-current border-t-transparent text-blue-600 rounded-full"
                role="status" aria-label="loading">
                <span class="sr-only">Loading...</span>
              </div>
              <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Loading users...</p>
            </div>

            <!-- Error State -->
            <div *ngIf="error"
              class="bg-red-50 border border-red-200 text-sm text-red-800 rounded-lg p-4 dark:bg-red-800/30 dark:border-red-900 dark:text-red-500"
              role="alert">
              <div class="flex">
                <div class="flex-shrink-0">
                  <svg class="flex-shrink-0 h-4 w-4 mt-0.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10" />
                    <path d="M12 16v-4" />
                    <path d="M12 8h.01" />
                  </svg>
                </div>
                <div class="ms-4">
                  <h3 class="text-sm font-semibold">
                    Error loading users
                  </h3>
                  <p class="mt-0.5 text-sm">
                    {{ error }}
                  </p>
                </div>
              </div>
            </div>

            <!-- Empty State -->
            <div *ngIf="!loading && !error && users.length === 0" class="text-center p-6">
              <svg class="mx-auto h-12 w-12 text-gray-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" />
              </svg>
              <h3 class="mt-2 text-sm font-semibold text-gray-800 dark:text-gray-200">
                No users found
              </h3>
              <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
                Try adjusting your search or filter criteria.
              </p>
              <div class="mt-6">
                <button type="button" (click)="clearFilters()"
                  class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none">
                  <svg class="flex-shrink-0 w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M2 14L14 2" />
                    <path d="M14 14L2 2" />
                  </svg>
                  Reset filters
                </button>
              </div>
            </div>

            <!-- Users Table -->
            <div *ngIf="!loading && !error && users.length > 0" class="overflow-x-auto">
              <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                <thead class="bg-gray-50 dark:bg-slate-800">
                  <tr>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase">Name</th>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase">Email</th>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase">Phone</th>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase">Roles</th>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase">Status
                    </th>
                    <th scope="col" class="px-6 py-3 text-end text-xs font-medium text-gray-500 uppercase">Actions</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                  <tr *ngFor="let user of users" class="bg-white hover:bg-gray-50 dark:bg-slate-900 dark:hover:bg-slate-800">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-gray-200">
                      <div class="flex items-center">
                        <div
                          class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300">
                          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                            <circle cx="12" cy="7" r="4" />
                          </svg>
                        </div>
                        <div class="ms-4">
                          <div class="text-sm font-medium text-gray-900 dark:text-gray-200">
                            {{ user.name }}
                          </div>
                          <div class="text-sm text-gray-500 dark:text-gray-400">
                            {{ user.id }}
                          </div>
                        </div>
                      </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-gray-200">
                      {{ user.email }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-gray-200">
                      {{ user.phone || 'N/A' }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-gray-200">
                      <div class="flex flex-wrap gap-1">
                        <span *ngFor="let role of user.role" class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium"
                          [ngClass]="{
                            'bg-blue-100 text-blue-800 dark:bg-blue-800/30 dark:text-blue-500': role === 'ADMIN',
                            'bg-green-100 text-green-800 dark:bg-green-800/30 dark:text-green-500': role === 'USER',
                            'bg-purple-100 text-purple-800 dark:bg-purple-800/30 dark:text-purple-500': role === 'PREMIUM_USER'
                          }">
                          {{ role }}
                        </span>
                      </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-gray-200">
                      <span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium"
                        [ngClass]="{
                          'bg-green-100 text-green-800 dark:bg-green-800/30 dark:text-green-500': user.isActive,
                          'bg-red-100 text-red-800 dark:bg-red-800/30 dark:text-red-500': !user.isActive
                        }">
                        <svg class="w-2.5 h-2.5"
                          [ngClass]="{
                            'fill-green-500': user.isActive,
                            'fill-red-500': !user.isActive
                          }"
                          width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <circle cx="8" cy="8" r="8" />
                        </svg>
                        {{ user.isActive ? 'Active' : 'Inactive' }}
                      </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-end text-sm font-medium">
                      <div class="inline-flex items-center gap-x-2">
                        <div class="hs-tooltip inline-block">
                          <button type="button" (click)="viewUser(user.id)"
                            class="hs-tooltip-toggle py-2 px-3 inline-flex items-center gap-x-2 text-sm rounded-lg border border-transparent font-semibold bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:pointer-events-none">
                            <svg class="flex-shrink-0 w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                            <span
                              class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 inline-block absolute invisible z-20 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-lg shadow-sm dark:bg-slate-700"
                              role="tooltip">
                              View
                            </span>
                          </button>
                        </div>
                        <div class="hs-tooltip inline-block">
                          <button type="button" (click)="toggleUserStatus(user)"
                            class="hs-tooltip-toggle py-2 px-3 inline-flex items-center gap-x-2 text-sm rounded-lg border border-transparent font-semibold bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:pointer-events-none">
                            <svg class="flex-shrink-0 w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-toggle-right"><rect width="22" height="14" x="1" y="5" rx="7" ry="7"/><circle cx="16" cy="12" r="3"/></svg>
                            <span
                              class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 inline-block absolute invisible z-20 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-lg shadow-sm dark:bg-slate-700"
                              role="tooltip">
                              {{ user.isActive ? 'Deactivate' : 'Activate' }}
                            </span>
                          </button>
                        </div>
                        <div class="hs-tooltip inline-block">
                          <button type="button" (click)="deleteUser(user.id)"
                            class="hs-tooltip-toggle py-2 px-3 inline-flex items-center gap-x-2 text-sm rounded-lg border border-transparent font-semibold bg-red-500 text-white hover:bg-red-600 disabled:opacity-50 disabled:pointer-events-none">
                            <svg class="flex-shrink-0 w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-2"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
                            <span
                              class="hs-tooltip-content hs-tooltip-shown:opacity-100 hs-tooltip-shown:visible opacity-0 inline-block absolute invisible z-20 py-1 px-2 bg-gray-900 text-xs font-medium text-white rounded-lg shadow-sm dark:bg-slate-700"
                              role="tooltip">
                              Delete
                            </span>
                          </button>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Pagination -->
            <div
              class="px-6 py-4 grid gap-3 md:flex md:justify-between md:items-center border-t border-gray-200 dark:border-gray-700">
              <div class="text-sm text-gray-600 dark:text-gray-400">
                Showing <span class="font-semibold text-gray-800 dark:text-gray-200">{{ (currentPage - 1) * itemsPerPage + 1 }}</span> to
                <span class="font-semibold text-gray-800 dark:text-gray-200">{{ Math.min(currentPage * itemsPerPage, totalUsers) }}</span> of
                <span class="font-semibold text-gray-800 dark:text-gray-200">{{ totalUsers }}</span> users
              </div>

              <nav class="flex -space-x-px shadow-sm rounded-xl" aria-label="Pagination">
                <button type="button" (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1"
                  class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-s-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-slate-800">
                  <svg class="flex-shrink-0 w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="m11 14-5-5 5-5" />
                  </svg>
                  Prev
                </button>
                <ng-container *ngFor="let page of getPageNumbers()">
                  <button type="button" (click)="onPageChange(page)"
                    [ngClass]="{'bg-blue-500 text-white hover:bg-blue-600': currentPage === page, 'bg-white text-gray-800 hover:bg-gray-50 dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-slate-800': currentPage !== page}"
                    class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium border border-gray-200 shadow-sm disabled:opacity-50 disabled:pointer-events-none">
                    {{ page }}
                  </button>
                </ng-container>
                <button type="button" (click)="onPageChange(currentPage + 1)"
                  [disabled]="currentPage === (totalUsers / itemsPerPage | ceil)"
                  class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-e-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-slate-800">
                  Next
                  <svg class="flex-shrink-0 w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="m5 14 5-5-5-5" />
                  </svg>
                </button>
              </nav>
            </div>
            <!-- End Pagination -->
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- User Form -->
  <ng-container *ngIf="showUserForm">
    <app-user-form [user]="selectedUser" (formSubmitted)="onFormSubmitted()"
      (formCancelled)="onFormCancelled()"></app-user-form>
  </ng-container>
</div>
